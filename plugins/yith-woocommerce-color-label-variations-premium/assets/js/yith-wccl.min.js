jQuery(document).ready(function(t){"use strict";if("undefined"==typeof yith_wccl_general)return!1;var a=[],e="";t.fn.yith_wccl_select=function(a,e){var o,r,l=t(this),d=a[l.attr("name")],_=l.parent().find(".select_box"),h=[];void 0===d&&(d=a[decodeURIComponent(l.attr("name"))]),o=void 0!==d?d.type:l.data("type"),r=void 0!==d&&d.terms,l.addClass("yith_wccl_custom").hide(),l.closest(".select-wrapper").addClass("yith_wccl_is_custom"),_.length&&yith_wccl_general.grey_out||(_.remove(),_=t("<div />",{class:"select_box_"+o+" select_box "+l.attr("name")}).insertAfter(l)),l.find("option").each(function(){var a=t(this).val();if(r&&void 0!==r[a]||t(this).data("value")){h.push(a);var d="select_option_"+o+" select_option",p=r&&void 0!==r[a]?r[a].value:t(this).data("value"),v=r&&void 0!==r[a]?r[a].tooltip:t(this).data("tooltip"),u=t(this),f=_.find('[data-value="'+a+'"]');f.length||(a==l.val()&&(d+=" selected"),(f=t("<div/>",{class:d,"data-value":a}).appendTo(_)).on("click",function(a){if(t(this).hasClass("inactive")){var c=l.data("attribute_name")||l.attr("name");i(e,t(this).data("value"),c)?l.val("").change():s(e,!1,[])}t(this).hasClass("selected")?l.val("").change():l.val(u.val()).change(),n(t(this))}),"colorpicker"==o?1==(p=p.split(",")).length?f.append(t("<span/>",{class:"yith_wccl_value",css:{background:p}})):(f.append(t('<span class="yith_wccl_value"><span class="yith-wccl-bicolor"/></span>')),f.find(".yith-wccl-bicolor").css({"border-bottom-color":p[0],"border-left-color":p[1]})):"image"==o?f.append(t("<img/>",{class:"yith_wccl_value",src:p})):"label"==o&&f.append(t("<span/>",{class:"yith_wccl_value",text:p})),yith_wccl_general.tooltip&&void 0!==v&&""!=v&&("image"==o&&-1!=v.indexOf("{show_image}")&&(v=v.replace("{show_image}",'<img src="'+p+'" />')),c(f,v)))}}),_.children().each(function(){var a=t(this).data("value")+"";"-1"==t.inArray(a,h)?t(this).addClass("inactive"):t(this).removeClass("inactive")}),t(document).trigger("yith_wccl_select_initialized",[l,d])};var i=function(a,e,i){var s=!1,c=a.data("product_variations"),n=a.find(".variations select"),o=[];t.each(n,function(){var a=t(this).data("attribute_name")||t(this).attr("name");o[a]=i==a?e:t(this).val()});for(var r=0;r<c.length;r++){var l=c[r];if(s)break;s=l;for(var d in l.attributes)if(l.attributes.hasOwnProperty(d)){var _=l.attributes[d];_!=o[d]&&""!=_&&(s=!1)}}return s},s=function(t,a,e){var i=t.find(".variations select");1==i.length&&a?t.trigger("woocommerce_update_variation_values"):i.val(""),i.change(),a||(t.find("div.select_option").removeClass("selected inactive"),t.trigger("reset_data"))},c=function(a,e){var i=t('<span class="yith_wccl_tooltip"></span>'),s=yith_wccl_general.tooltip_pos+" "+yith_wccl_general.tooltip_ani;i.addClass(s),a.append(i.html("<span>"+e+"</span>"))},n=function(t){t.toggleClass("selected"),t.siblings().removeClass("selected")},o=function(a){a.preventDefault();var e=t(this),i=e.data("product_id"),s=e.data("quantity"),c=[],n=!1;a.data.select.each(function(t){c[t]=this.name+"="+this.value});try{n="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc")}catch(t){n=!1}t.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%","yith_wccl_add_to_cart"),type:"POST",data:{action:"yith_wccl_add_to_cart",product_id:i,variation_id:a.data.variation,attr:c.join("&"),quantity:s,context:"frontend"},beforeSend:function(){e.addClass("loading").removeClass("added")},success:function(a){a.error&&a.product_url?window.location=a.product_url:yith_wccl_general.cart_redirect?window.location=yith_wccl_general.cart_url:(e.removeClass("loading").addClass("added"),e.next(".added_to_cart").length||e.after(' <a href="'+yith_wccl_general.cart_url+'" class="added_to_cart wc-forward" title="'+yith_wccl_general.view_cart+'">'+yith_wccl_general.view_cart+"</a>"),a.fragments&&t.each(a.fragments,function(a,e){t(a).replaceWith(e)}),n&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(a.fragments)),sessionStorage.setItem("wc_cart_hash",a.cart_hash)),t(document).trigger("wc_update_cart"),t(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,e]))}})};t.yith_wccl=function(a){e=t(".variations_form.cart:not(.initialized), .owl-item.cloned .variations_form, form.cart.ywcp_form_loaded"),void 0===(a="undefined"!=typeof yith_wccl?JSON.parse(yith_wccl.attributes):a)&&(a=[]),e.each(function(){if(0!==a.length||t(this).hasClass("in_loop")){var e=t(this),c=e.find(".variations select"),n=!1,r=!1,l=e.closest(yith_wccl_general.wrapper_container_shop).length?e.closest(yith_wccl_general.wrapper_container_shop):e.closest(".product-add-to-cart"),d=l.find("img.wp-post-image"),_=d.data("lazy-src")?d.data("lazy-src"):d.attr("src"),h=d.data("lazy-srcset")?d.data("lazy-srcset"):d.attr("srcset"),p=l.find("span.price").clone().wrap("<p>").parent().html(),v=l.find("a.product_type_variable"),u=v.html(),f=l.find("input.thumbnail-quantity"),g=!1===e.data("product_variations"),m=function(i,c){var n=i.length;i.each(function(){var i,o=a[this.name],r=void 0!==o,d=t(this).data("type"),_=e.hasClass("initialized");if(r||(i=decodeURIComponent(this.name),r=void 0!==(o=a[i])),--n,_||(c?t(this).attr("data-default_value",t(this).val()):t(this).val(t(this).data("default_value"))),r||d)if(c){if(!e.hasClass("in_loop")&&!l.length&&yith_wccl_general.description&&o.descr){var h=!!t(this).closest("tr").length,p=h?'<tr><td colspan="2">'+o.descr+"</td></tr>":'<p class="attribute_description">'+o.descr+"</p>";h?t(this).closest("tr").after(p):t(this).parent().append(p)}}else(r&&o.terms||d)&&t(this).yith_wccl_select(a,e);c&&!n&&s(e,!0,a),n||_||(e.addClass("initialized"),e.fadeIn(),t(e).trigger("yith_wccl_form_initialized"))})},w=function(){y(!1),l.find("span.price").replaceWith(p),l.find(".ywccl_stock").remove(),f.length&&f.hide(),v.html(u).off("click",o).removeClass("added").next(".added_to_cart").remove()},y=function(t){if(t){var a=void 0!==t.image?t.image.src:t.image_src,e=void 0!==t.image?t.image.srcset:t.image_srcset;a&&a.length&&(d.attr("src",a),d.attr("data-lazy-src",a)),e&&e.length&&(d.attr("srcset",e),d.attr("data-lazy-srcset",e))}else d.attr("src",_),d.attr("srcset",h)};e.on("check_variations",function(t,a,e){if(!e){if(n&&(n=!1,!g))return;r&&(r=!1,w())}}),e.on("woocommerce_update_variation_values",function(){m(c,!1)}),e.on("reset_data",function(){g&&m(c,!1)}),e.on("found_variation",function(a,i){if(g?m(c,!1):c.last().trigger("focusin"),e.hasClass("in_loop")){r&&w(),n=!0,r=!0;var s=i.display_price?i.price_html:"",d=i.variation_id;y(i),s&&l.find("span.price").replaceWith(s),f.length&&f.show(),i.is_in_stock&&(v.html(yith_wccl_general.add_cart),v.off("click").on("click",{variation:d,select:c},o)),l.find("span.price").after(t(i.availability_html).addClass("ywccl_stock")),t(document).trigger("ywccl_found_variation_in_loop",[i])}}),e.on("click",".reset_variations",function(){t(".select_option.selected").removeClass("selected")}),e.hasClass("in_loop")&&e.parent().on("change",function(t){t.stopPropagation()}),f.length&&f.hide(),m(c,!0),1==c.length&&yith_wccl_general.image_hover&&(e.on("mouseenter",".select_option",function(){var a=t(this).attr("data-value"),s=c.attr("name"),n=i(e,a,s);t(this).hasClass("selected")||t(this).siblings().hasClass("selected")||n&&(e.hasClass("in_loop")?y(n):e.wc_variations_image_update(n))}),e.on("mouseleave",".select_option",function(){t(this).hasClass("selected")||t(this).siblings().hasClass("selected")||(e.hasClass("in_loop")?y(!1):e.wc_variations_image_update(!1))}))}})},t.yith_wccl(a),t(document).on("yith-wcan-ajax-filtered yith_infs_adding_elem initialized.owl.carousel post-load",function(){void 0!==t.yith_wccl&&void 0!==t.fn.wc_variation_form&&(t(document).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each(function(){t(this).wc_variation_form()}),t.yith_wccl(a))}),t("body").on("quick-view-displayed",function(){var a=t(".pp_woocommerce_quick_view").find(".yith-wccl-data").data("attr");a&&t.yith_wccl(a)})});